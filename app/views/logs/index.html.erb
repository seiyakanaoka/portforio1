<div class="container all">

  <div class="row mt-5">
    <div class="col-sm-10 mx-auto">

      <div class="row">

        <% if user_signed_in? %>
          <% unless current_user.logs.empty? %>
            <%= render 'logs/log', logs: @logs %>
          <% else %>
            <div class="col-sm-7 pt-3"><br /><br />
            <div class="row">
              <div class="col-sm-12">
                <h1 class="logo text-center">Memories</h1>
              </div>
            </div>
            <h2 class="text-center">さぁ、思い出を投稿しよう！</h2><br /><br />
            <p class="text-center">初投稿はここからできるよ！</p>
            <p class="custom-btn"><%= link_to new_log_path, class: "btn-gradation rounded-pill" do %>投稿する<% end %></p><br />
              <% @logs.reverse.each do |log| %>
            <div class="row">
              <div class="col-sm-12 logs text-dark shadow-lg border border-light mb-5 pt-3 pb-3 content" style="background: #DEF3F7;">
                <div class="row">
                  <div class="col-sm-1"></div>
                  <div class="col-sm-7 index-user float-left">
                    <% if log.user != current_user %>
                      <%= link_to user_path(log.user_id) ,class: "text-dark" do %>
                        <p class="text-dark">
                          <%= attachment_image_tag log.user, :profile_image, size: "50x50", class: "rounded-circle" %>
                          <%= log.user.name %>
                        </p>
                      <% end %>
                    <% else %>
                      <%= link_to my_page_user_path(current_user.id) do %>
                        <p class="text-dark">
                          <%= attachment_image_tag current_user, :profile_image, size: "50x50", class: "rounded-circle" %>
                          <%= current_user.name %>
                        </p>
                      <% end %>
                    <% end %>
                    <span>【<%= log.title %>】</span><br />
                    <%= log.dive_point %>
                  </div>
                  <div class="col-sm-3 log-edit align-items-end">
                    <% if log.user == current_user %>
                      <%= link_to edit_log_path(log.id), class: "float-right pt-4 text-dark" do %><i class="fas fa-cog"></i><% end %><br />
                    <% end %>
                  </div>
                </div>
                <div class="row log-image text-center">
                  <div class="col-sm-12">
                    <%= link_to log_path(log.id) do %><%= attachment_image_tag log, :log_image, size: "430x430", class: "img-fluid" %><% end %><br />
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-1"></div>
                  <div class="col-sm-4">
                    <span id="log_<%= log.id %>">
                      <%= render 'logs/favo', log: log %>
                    </span>
                  </div>
                  <div class="col-sm-3 text-center">
                    <i class="far fa-comments"></i><%= log.log_comments.count %>
                  </div>
                  <div class="col-sm-3 mx-auto text-right">
                    <strong><%= log.impressionist_count %>PV</strong><br />
                  </div>
                </div>
              </div>
            </div>
            <% end %>
            </div>
          <% end %>

        <% else %>
          <%= render 'logs/log', logs: @logs %>
        <% end %>

        <% if user_signed_in? %>
          <div class="col-sm-3 pt-5 shadow-lg border border-light text" style="height: 400px; position: fixed; right: 150px; top: 130px; background: #DEF3F7;">
            <h3 class="text-center logo mb-3">My Profile</h3>

            <table class="table table-borderless">
              <thead>
                <tr><th><%= attachment_image_tag current_user, :profile_image, size: "50x50", class: "rounded-circle" %>　<%= current_user.nick_name %></th></tr>
                <tr><th>ライセンス</th><th><%= current_user.license_rank %></th></tr>
                <tr><th>follow</th><th><%= current_user.following_user.count %></th></tr>
                <tr><th>follower</th><th><%= current_user.follower_user.count %></th></tr>
                <tr><th>投稿数</th><th><%= current_user.logs.count %></th></tr>
              </thead>
            </table>
          </div>
        <% else %>
          <div class="col-sm-3 text pt-5" style="height: 150px; position: fixed; right: 150px; top: 130px;">
            <h3 class="text-center mb-3">Beginner</h3>
          </div>
        <% end %>
      </div>

    </div>
  </div>
</div>